<!doctype html>
<html lang="es" data-theme="cream">
<head>
  <meta charset="utf-8"/>
 <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Área de Análisis Textual</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
   :root{
      --bd:#e6e8eb;
      --muted:#6b7280;
      --bg:#f8fafc;
      --surface:#ffffff;
      --text:#0f172a;
      --primary:#2563eb;
      --primary-contrast:#ffffff;
      --soft-bg:#f1f5f9;
      --soft-hover:#e9eef5;
      --outline:#cbd5f5;
    }
    [data-theme="cream"]{
      --bd:#d5c1b1;
      --muted:#6d5d52;
      --bg:#edddce;
      --surface:#cdbaa9;
      --text:#2c1d1f;
      --primary:#4b2743;
      --primary-contrast:#fdf6f2;
      --soft-bg:#e0cdbd;
      --soft-hover:#d6c2b2;
      --outline:#4b2743;
    }
    [data-theme="white"]{
      --bd:#e6e8eb;
      --muted:#6b7280;
      --bg:#f8fafc;
      --surface:#ffffff;
      --text:#0f172a;
      --primary:#2563eb;
      --primary-contrast:#ffffff;
      --soft-bg:#f1f5f9;
      --soft-hover:#e9eef5;
      --outline:#cbd5f5;
    }
    body{ background:var(--bg); color:var(--text); }
    .topbar{
      background:#ffffff;
      border-bottom:1px solid var(--bd);
      position:sticky; top:0; z-index:1000;
    }
    .sitewrap{ max-width: 1280px; }
    .panel{
     background:var(--surface);
      border:1px solid var(--bd);
      border-radius:12px;
    }
    .panel-header{
      border-bottom:1px solid var(--bd);
      padding:.75rem 1rem;
      font-weight:600;
    }
   .panel-body{ padding:1rem; background:var(--surface); }
    .btn-soft{ background:var(--soft-bg); border:1px solid var(--bd); color:var(--text); }
    .btn-soft:hover{ background:var(--soft-hover); }
    .btn-primary{
      background:var(--primary);
      border-color:var(--primary);
      color:var(--primary-contrast);
    }
    .btn-outline-primary{
      color:var(--primary);
      border-color:var(--primary);
    }
    [data-theme="cream"] .btn-primary,
    [data-theme="cream"] .btn-outline-primary{
      background:#4b2743;
      border-color:#4b2743;
      color:#ffffff;
    }
    [data-theme="cream"] .btn-primary:hover,
    [data-theme="cream"] .btn-outline-primary:hover{
      background:#ffffff;
      border-color:#4b2743;
      color:#000000;
    }
    [data-theme="white"] .btn-primary,
    [data-theme="white"] .btn-outline-primary{
      background:#ffffff;
      border-color:#2563eb;
      color:#2563eb;
    }
    [data-theme="white"] .btn-primary:hover,
    [data-theme="white"] .btn-outline-primary:hover{
      background:#eff6ff;
      border-color:#2563eb;
      color:#1d4ed8;
    }
    .tag{
      display:inline-flex;
      align-items:center;
      gap:.35rem;
      padding:.15rem .6rem;
      border-radius:999px;
      font-size:.8rem;
 background:var(--soft-bg);
      color:var(--text);
      border:1px solid var(--bd);
    }
    .muted{ color:var(--muted); }
    .lexicon-grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap:.75rem;
    }
    .example-card{
    border:1px dashed var(--outline);
      background:var(--soft-bg);
      border-radius:10px;
      padding:.65rem .75rem;
      font-size:.9rem;
    }
       [data-theme="cream"] .panel-header{
      border-bottom:1px solid #7c4f2b;
    }
    [data-theme="cream"] .panel-body{
      background:#ffffff;
      color:#000000;
    }
    [data-theme="cream"] .panel-body .muted{
      color:#000000;
    }
    [data-theme="cream"] .tag{
      background:#ffffff;
      color:#000000;
      border-color:#000000;
    }
    [data-theme="cream"] .example-card{
      background:#ffffff;
      color:#000000;
      border-color:#000000;
    }
    .greek{
      font-family: 'Gentium Plus','SBL Greek','Times New Roman',serif;
      font-size:1.05rem;
    }
    .hebrew{
      direction:rtl;
      unicode-bidi:plaintext;
      font-family: 'SBL Hebrew','Ezra SIL','Times New Roman',serif;
      font-size:1.08rem;
    }
    .search-row{ gap:.75rem; }
    .helper-list li{ margin-bottom:.35rem; }
    .loading-indicator{
      display:inline-flex;
      align-items:center;
      gap:.5rem;
      font-size:.85rem;
      color:var(--muted);
    }
    .loading-indicator .spinner{
      width:1rem;
      height:1rem;
      border:2px solid #cbd5f5;
      border-top-color:var(--primary);
      border-radius:50%;
      animation:spin .8s linear infinite;
    }
    .results-loading-stage{
      min-height:320px;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:.85rem;
      color:var(--muted);
      background:color-mix(in srgb, var(--soft-bg) 55%, #ffffff);
      border:1px dashed var(--bd);
      border-radius:12px;
      margin-bottom:1rem;
    }
    .results-loading-stage .big-spinner{
      width:4.5rem;
      height:4.5rem;
      border:6px solid color-mix(in srgb, var(--primary) 20%, #ffffff);
      border-top-color:var(--primary);
      border-radius:50%;
      animation:spin .9s linear infinite;
    }
    [data-theme="cream"] .results-loading-stage{
      background:#ffffff;
      color:#000000;
      border-color:#4b2743;
    }
    .form-control,
    .form-select{
      background:#ffffff;
      border-color:color-mix(in srgb, var(--text) 55%, #ffffff);
      color:var(--text);
    }
    .form-control::placeholder{ color:color-mix(in srgb, var(--muted) 80%, transparent); }
    .analysis-title{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      text-align:center;
      line-height:1.2;
    }
    @media (max-width: 767.98px){
      .analysis-title{
        position:static;
        transform:none;
        width:100%;
        margin-top:.5rem;
      }
    }
    @keyframes spin{
      to{ transform:rotate(360deg); }
    }
     /* Responsive tablet + desktop (celulares fuera de alcance) */
    :root{
      --layout-min-tablet: 768px;
    }

    @media (max-width: 767.98px){
      body{
        min-width: var(--layout-min-tablet);
        overflow-x:auto;
      }
      .container.sitewrap{
        min-width: var(--layout-min-tablet);
      }
    }

    @media (min-width: 768px) and (max-width: 1024px){
      .sitewrap{ max-width: 980px; }
      .panel-header{ padding:.65rem .85rem; }
      .panel-body{ padding:.85rem; }
    }

    @media (min-width: 1025px) and (max-width: 1366px){
      .sitewrap{ max-width: 1240px; }
    }

    @media (min-width: 1367px) and (max-width: 1920px){
      .sitewrap{ max-width: 1460px; }
    }

    @media (min-width: 1921px){
      .sitewrap{ max-width: 1720px; }
      .panel-body{ padding:1.1rem 1.15rem; }
      .panel-header{ font-size:1.03rem; }
    }
  </style>
</head>
<body>
  <header class="topbar">
  <div class="container sitewrap py-2 d-flex flex-wrap gap-2 align-items-center position-relative">
      <a class="btn btn-soft btn-sm" href="index.html">Volver al lector</a>
      <div class="analysis-title">
        <div class="fw-semibold">Área de análisis textual</div>
<div class="small muted">LXX · Hebreo · RKANT · RVR1960</div>
      </div>
    </div>
  </header>

  <main class="container sitewrap my-3 my-lg-4">
    <section class="panel mb-3">
      <div class="panel-header">Buscador y criterio</div>
      <div class="panel-body">
        <div class="row search-row g-2">
          <div class="col-12 col-lg-6">
            <label for="queryInput" class="form-label fw-semibold">Buscar palabra, lema o frase compuesta</label>
            <div class="input-group">
              <input id="queryInput" class="form-control" placeholder="Ej: אָב, πατήρ, origen, fuente" value="πατήρ"/>
             <button id="analyzeBtn" class="btn btn-primary" type="button">Analizar</button>
            </div>
            <div class="form-text">Se aceptan términos en hebreo, griego o español. El sistema prioriza el lema y las variantes morfológicas.</div>
          </div>
          <div class="col-12 col-lg-6">
         <label class="form-label fw-semibold">Filtros rápidos</label>
 <button class="btn btn-soft btn-sm" type="button" data-filter="torah">Torah</button>
              <button class="btn btn-soft btn-sm" type="button" data-filter="profetas">Profetas</button>
              <button class="btn btn-soft btn-sm" type="button" data-filter="evangelios">Evangelios</button>
              <button class="btn btn-soft btn-sm" type="button" data-filter="cartas">Cartas</button>
              <button class="btn btn-soft btn-sm" type="button" data-filter="todo">Todo</button>
            </div>
            <div class="form-text">Los filtros ajustan los resultados por corpus según el idioma detectado.</div>
          </div>
        </div>
      </div>
    </section>

    <div id="analysisResultsSection" class="row g-3">
      <div class="col-12 col-lg-4">
<section id="lemmaSummaryPanel" class="panel h-100">
  <div class="panel-header">Resumen del lema</div>
          <div class="panel-body">
            <div class="d-flex flex-column gap-2">
              
        <div id="lemmaTags" class="d-flex flex-wrap gap-2"></div>
              <p id="lemmaSummary" class="mb-2 small muted">Escribe un término para generar el resumen del lema.</p>
               <div>
                <div class="fw-semibold">Correspondencia multilingüe</div>
                <div id="lemmaCorrespondence" class="d-grid gap-2 mt-2"></div>
              </div>
              <div id="lemmaExamples" class="d-grid gap-2"></div>
            </div>
          </div>
        </section>
      </div>

      <div class="col-12 col-lg-8">
        <section class="panel">
         <div class="panel-header d-flex flex-wrap justify-content-between align-items-center gap-2">
            <span>Resultados por corpus</span>
            <div id="resultsLoadingIndicator" class="loading-indicator" role="status" aria-live="polite" hidden>
              <span class="spinner" aria-hidden="true"></span>
              <span>Procesando resultados por corpus...</span>
            </div>
          </div>
          <div class="panel-body">
             <div id="resultsLoadingStage" class="results-loading-stage" role="status" aria-live="polite" hidden>
              <span class="big-spinner" aria-hidden="true"></span>
              <span class="fw-semibold">Cargando análisis...</span>
            </div>
            <div id="resultsByCorpus" class="row g-3"></div>
          </div>
        </section>
      </div>
    </div>
  </main>
  <script src="./analisis.js"></script>
  <script>
    (function(){
      const allowedThemes = new Set(['cream', 'white']);
      const stored = localStorage.getItem('lectorTheme');
      const theme = allowedThemes.has(stored) ? stored : 'cream';
      document.documentElement.dataset.theme = theme;
    })();
  </script>
</body>
</html>
